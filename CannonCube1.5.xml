<map proto="1.3.3" internal="true">
<name>CannonCube</name>
<version>1.5.0</version>
<objective>Attackers have 20 minutes to destroy the Endstone Pillar, while the Defenders must prevent them from doing so.</objective>
<authors>
    <author>Elijahyap</author>
</authors>
<contributors>
    <contributor contribution="Large sections of XML and help with bug fixing">last_username</contributor>
    <contributor contribution="Gamemode Inspiration and Aesthetics">last_username</contributor>
    <contributor contribution="More aesthetic inspiration">himan22566</contribution>
</contributors>
<rules>
    <rule>There are NO restrictions on spawn camping/killing</rule>
    <rule>Attacker pickaxes do double damage</rule>
    <rule>Smooth quartz blocks are fully blast resistant (and can be mined)</rule>
    <rule>Spawn platforms refill your health and give you full resistance</rule>
    <rule>Defenders are allowed to blow up th</rule>
</rules>
<teams>
    <team color="dark red" max="32" max-overfill="40">Attackers</team>
    <team color="blue" max="32" max-overfill="40">Defenders</team>
</teams>
<spawns>
    <default kit="all"  yaw="0" pitch="0">
        <cuboid min="-2,91,-111" max="3,91,-106"/>
    </default>
    <spawn team="attackers" kit="attacker"  yaw="0" pitch="0">
        <cuboid min="-9,49,-232" max="10,49,-227"/>
    </spawn>
    <spawn team="defenders" kit="defender" safe="true"  yaw="180" pitch="0">
        <cuboid min="-4,2,-14" max="5,2,-5"/>
    </spawn>
</spawns>
<kits>
    <!--    kit given to everyone, including observers    -->
    <kit name="all" potion-particles="false">
        <potion duration="oo" ambient="true">night vision</potion>
        <potion duration="oo" ambient="true">saturation</potion>
    </kit>
    <!--    kit given to both teams    -->
    <kit name="team" parents="all">
        <item slot="9">workbench</item>
        <item slot="18" amount="3">dispenser</item>
        <item slot="10">shears</item>
        <item slot="28">arrow</item>
        <item slot="29" amount="64">vine</item>
        <item slot="2" amount="64">vine</item>
        <item slot="13" amount="16">trap door</item>
        <item slot="22" amount="16">ladder</item>
        <item slot="31" amount="64">step</item>
        <item slot="4" amount="64">nether fence</item>
        <item slot="14" amount="16">piston base</item>
        <item slot="23" amount="16">lever</item>
        <item slot="32" amount="16">stone plate</item>
        <item slot="5" amount="16">stone button</item>
        <item slot="15">water bucket</item>
        <item slot="24">water bucket</item>
        <item slot="33">water bucket</item>
        <item slot="6">water bucket</item>
        <item slot="16" amount="16">diode</item>
        <item slot="25" amount="16">redstone torch on</item>
        <item slot="34" amount="64">redstone</item>
        <item slot="7" amount="16">redstone block</item>
        <item slot="17" amount="64">tnt</item>
        <item slot="26" amount="64">tnt</item>
        <item slot="35" amount="64">tnt</item>
        <item slot="8" amount="64">tnt</item>
    </kit>
    <kit name="attacker" parents="team">
        <item slot="0" attributes="generic.attackDamage:add:10" name="Sharpened Diamond Pickaxe">diamond pickaxe</item>
        <item slot="1" amount="32">snow ball</item>
        <item slot="11" name="Blade of Icarus">wood sword</item>
        <item slot="12" damage="14" amount="64">stained glass</item>
        <item slot="21" damage="14" amount="64">stained clay</item>
        <item slot="30" damage="14" amount="64">stained clay</item>
        <item slot="3" damage="14" amount="64">stained clay</item>
        <helmet enchantment="protection explosions:3;water worker:3">iron helmet</helmet>
        <chestplate color="dd5566">leather chestplate</chestplate>
        <leggings color="dd5566">leather leggings</leggings>
        <boots color="dd5566" enchantment="protection fall:3">leather boots</boots>
    </kit>
    <kit name="defender" parents="team">
        <item slot="1">bow</item>
        <item slot="28" amount="32">arrow</item>
        <item slot="0">diamond pickaxe</item>
        <item slot="12" damage="11" amount="64">stained glass</item>
        <item slot="21" damage="11" amount="64">stained clay</item>
        <item slot="30" damage="11" amount="64">stained clay</item>
        <item slot="3" damage="11" amount="64">stained clay</item>
        <helmet enchantment="protection explosions:3">iron helmet</helmet>
        <chestplate color="5e55dd">leather chestplate</chestplate>
        <leggings enchantment="protection projectile:2">iron leggings</leggings>
        <boots enchantment="protection fall:3">iron boots</boots>
        <!--    this will be removed when they leave spawn    -->
        <potion duration="oo" amplifier="5" ambient="true">damage resistance</potion>
    </kit>
    <kit name="spawn-buff-apply" force="true">
        <potion amplifier="5" duration="oo" ambient="true">damage resistance</potion>
        <potion amplifier="10" duration="1" ambient="true">heal</potion>
    </kit>
    <kit name="drop-buff-apply" force="true">
        <potion amplifier="5" duration="7" ambient="true">damage resistance</potion>
    </kit>
    <kit name="launch-buff-apply" force="true">
        <potion amplifier="5" duration="3" ambient="true">damage resistance</potion>
    </kit>
    <kit name="spawn-buff-remove" force="true">
        <potion amplifier="0" duration="0" ambient="true">damage resistance</potion>
    </kit>
</kits>
<itemremove>
    <item>diamond pickaxe</item>
    <item>workbench</item>
    <item>dispenser</item>
    <item>shears</item>
    <item>wood sword</item>
    <item>bow</item>
    <item>arrow</item>
    <item>vine</item>
    <item>stained clay</item>
    <item>stained glass</item>
    <item>nether fence</item>
    <item>step</item>
    <item>ladder</item>
    <item>trap door</item>
    <item>stone plate</item>
    <item>piston base</item>
    <item>redstone block</item>
    <item>redstone</item>
    <item>stone button</item>
    <item>lever</item>
    <item>redstone torch on</item>
    <item>diode</item>
    <item>water bucket</item>
    <item>bucket</item>
    <item>tnt</item>
    <item>leather helmet</item>
    <item>leather chestplate</item>
    <item>leather leggings</item>
    <item>leather boots</item>
    <item>iron helmet</item>
    <item>iron chestplate</item>
    <item>iron leggings</item>
    <item>iron boots</item>
    <item>snow ball</item>
</itemremove>
<killreward>
    <filter><team>defenders</team></filter>
    <item amount="8">arrow</item>
</killreward>
<killreward>
    <filter><team>attackers</team></filter>
    <item amount="32">snow ball</item>
</killreward>
<filters>
    <filter name="attackers-only">
        <team>attackers</team>
    </filter>
    <filter name="defenders-only">
        <team>defenders</team>
    </filter>
    <filter name="deny-unbreakable-blocks">
        <deny>
        <any>
            <block>quartz block:2</block>
            <block>quartz stairs</block>
            <!--    pillar quartz and stairs    -->
            <block>stained glass:15</block>
            <!--    black stained glass    -->
        </any>
        </deny>
    </filter>
    <filter name="deny-TNT">
        <deny>
            <block>TNT</block>
        </deny>
    </filter>
    <filter name="deny-water">
        <deny>
        <any>
            <block>water</block>
            <block>stationary water</block>
        </any>
        </deny>
    </filter>
    <filter name="defender-only-explosives">
        <not>
        <all>
            <team>defenders</team>
            <any>
                <block>TNT</block>
                <block>stone plate</block>
                <block>redstone torch on</block>
                <block>lever</block>
                <block>redstone block</block>
                <block>stone button</block>
            </any>
        </all>
        </not>
    </filter>
    <filter name="deny-manual-endstone">
        <not>
        <all>
            <block>ender stone</block>
            <any>
                <filter name="allow-players"/>
                <filter name="deny-all"/>
            </any>
        </all>
    </not>
    </filter>
    <filter name="deny-quartz-world">
        <not>
        <all>
        <any>
            <block>quartz block:0</block>
        </any>
        <any>
            <filter name="allow-world"/>
            <filter name="deny-all"/>
        </any>
        </all>
        </not>
    </filter>
</filters>
<regions>
    <!--    the map cuboid    -->
    <cuboid name="cuboid" min="-44,0,-222" max="45,40,1"/>
    <!--    primary platform   -->
    <cuboid name="platform" min="0,0,0" max="9,5,9"/>
    <!--    the 3 attacker spawn platform areas   -->
    <union name="attacker-spawn-platforms">
        <translate offset="36,31,-212"><region name="platform"/></translate>
        <translate offset="-44,31,-212"><region name="platform"/></translate>
        <translate offset="-4,9,-222"><region name="platform"/></translate>
    </union>
    <!--    primary monument   -->
    <cuboid name="holding-area" min="0,0,0" max="11,4,11"/>
    <!--    the 3 iron door holding cells   -->
    <union name="holding-areas">
        <translate offset="35,32,-213"><region name="holding-area"/></translate>
        <translate offset="-45,32,-213"><region name="holding-area"/></translate>
        <translate offset="-5,10,-223"><region name="holding-area"/></translate>
    </union>
    <!--    attacker spawn room    -->
    <cuboid name="attacker-spawn-room" min="-11,48,-233" max="12,52,-200"/>
    <!--    primary portal   -->
    <cuboid name="portal" min="0,0,0" max="3,1,3"/>
    <!--    the 5 portals   -->
    <translate name="portal-a" offset="4,50,-206"><region name="portal"/></translate>
    <translate name="portal-b" offset="-6,50,-206"><region name="portal"/></translate>
    <translate name="portal-c" offset="-1,50,-212"><region name="portal"/></translate>
    <translate name="portal-d" offset="3,50,-218"><region name="portal"/></translate>
    <translate name="portal-e" offset="-5,50,-218"><region name="portal"/></translate>
    <translate name="portal-f" offset="5,50,-224"><region name="portal"/></translate>
    <translate name="portal-g" offset="-1,50,-225"><region name="portal"/></translate>
    <translate name="portal-h" offset="-7,50,-224"><region name="portal"/></translate>
    <translate name="return-portal-a" offset="29,65,-73"><region name="portal"/></translate>
    <translate name="return-portal-b" offset="-31,65,-73"><region name="portal"/></translate>
    <translate name="return-portal-c" offset="-1,65,-113"><region name="portal"/></translate>
    <translate name="return-portal-d" offset="19,65,-152"><region name="portal"/></translate>
    <translate name="return-portal-e" offset="-21,65,-152"><region name="portal"/></translate>
    <!--    the endstone pillar    -->
    <cuboid name="pillar" min="-2,5,-12" max="3,34,-7"/>
    <!--    the defender spawn structure    -->
    <cuboid name="defender-spawn" min="-4,2,-14" max="5,5,-5"/>
    <!--    water exclusion region inside the fortress    -->
    <cuboid name="water-free-zone" min="-11,0,-21" max="12,35,2"/>
    <!--    no build region inside the fortress    -->
    <cuboid name="above-monument" min="-11,35,-21" max="12,40,2"/>
    <!--   primary chute   -->
    <cuboid name="chute" min="0,0,0" max="9,43,9"/>
    <!--    forward drop chutes    -->
    <union name="forward-drop-chutes">
        <translate offset="-34,43,-73"><region name="chute"/></translate>
        <translate offset="26,43,-73"><region name="chute"/></translate>
        <translate offset="-4,43,-113"><region name="chute"/></translate>
        <translate offset="-24,43,-152"><region name="chute"/></translate>
        <translate offset="16,43,-152"><region name="chute"/></translate>
    </union>
    <!--   primary drop region   -->
    <cuboid name="drop" min="0,0,0" max="9,21,9"/>
    <!--    drop regions    -->
    <union name="below-drop-chutes">
        <translate offset="-34,0,-73"><region name="drop"/></translate>
        <translate offset="26,0,-73"><region name="drop"/></translate>
        <translate offset="-4,0,-113"><region name="drop"/></translate>
        <translate offset="-24,0,-152"><region name="drop"/></translate>
        <translate offset="16,0,-152"><region name="drop"/></translate>
    </union>
    <!--    no-build/no-destroy zones    -->
    <apply block="deny-all" message="You may not place or break blocks outside of the map">
        <negative>
            <region name="cuboid"/>
        </negative>
    </apply>
    <apply block="deny-all" message="You may not place or break blocks above the monument area">
        <region name="above-monument"/>
    </apply>
    <apply block="deny-all" message="You may not modify the drop chute area">
        <region name="forward-drop-chutes"/>
    </apply>
    <apply block="deny-all" message="You may not modify the spawn area">
        <union>
            <region name="defender-spawn"/>
            <region name="attacker-spawn-room"/>
            <region name="attacker-spawn-platforms"/>
        </union>
    </apply>
    <apply block="deny-unbreakable-blocks" message="This type of block is unbreakable">
        <rectangle min="-oo,-oo" max="oo,oo"/>
    </apply>
    <!--    don't allow water inside the fortress    -->
    <apply block="deny-water" message="You may not place `9water`c inside the fortress walls">
        <region name="water-free-zone"/>
    </apply>
    <!--    defenders only allowed to place explosives and related blocks below the drop chutes    -->
    <apply block="defender-only-explosives" message="You may only place and ignite `4TNT`c beneath drop chutes">
    	<region name="below-drop-chutes"/>
    </apply>
    <!--    keep the teams out of each other's spawns    -->
    <apply enter="defenders-only" message="You may not enter the `9Defender`c spawn">
        <region name="defender-spawn"/>
    </apply>
    <apply enter="attackers-only" message="You may not enter the `4Attacker`c spawn">
        <region name="attacker-spawn-platforms"/>
    </apply>
    <!--    apply spawn buffs    -->
    <apply kit="spawn-buff-apply" filter="attackers-only">
        <region name="attacker-spawn-platforms"/>
        <region name="attacker-spawn-room"/>
    </apply>
    <apply kit="spawn-buff-apply" filter="defenders-only">
        <region name="defender-spawn"/>
    </apply>
    <!--    remove spawn buffs    -->
    <apply kit="spawn-buff-remove">
        <negative>
            <union>
                <region name="attacker-spawn-room"/>
                <region name="attacker-spawn-platforms"/>
                <region name="defender-spawn"/>
            </union>
        </negative>
    </apply>
    <!--   prevent fall damage from forward spawns   -->
    <apply kit="drop-buff-apply" filter="attackers-only">
        <region name="forward-drop-chutes"/>
    </apply>
    <!--    prevent manual mining of the monument    -->
    <apply block-break="deny-manual-endstone" message="The Endstone Pillar can only be damaged with TNT">
	    <region name="pillar"/>
    </apply>
    <apply block-break="deny-quartz-world">
        <rectangle min="-oo,-oo" max="oo,oo"/>
    </apply>
    <!--    the D.M.Ps    -->
    <!--    3 D.M.Ps on cubes   -->
    <apply velocity="-1,1,0" enter="defenders-only">
        <cuboid min="20,10,-10" max="21,11,-9"/>
    </apply>
    <apply velocity="0,1,1" enter="defenders-only">
        <cuboid min="0,10,-30" max="1,11,-29"/>
    </apply>
    <apply velocity="1,1,0" enter="defenders-only">
        <cuboid min="-20,10,-30" max="-19,11,-29"/>
    </apply>
    <!--    2 D.M.Ps on lower cube   -->
    <apply velocity="-1.6,1.9,-1.6" enter="defenders-only" kit="launch-buff-apply">
        <cuboid min="-4,10,-34" max="-3,11,-33"/>
    </apply>
    <apply velocity="1.6,1.9,-1.6" enter="defenders-only" kit="launch-buff-apply">
        <cuboid min="4,10,-34" max="5,11,-33"/>
    </apply>
    <!--    2 outward D.M.Ps on upper cubes   -->
    <apply velocity="1.6,1.9,-1.6" enter="defenders-only" kit="launch-buff-apply">
        <cuboid min="24,21,-34" max="25,22,-33"/>
    </apply>
    <apply velocity="-1.6,1.9,-1.6" enter="defenders-only" kit="launch-buff-apply">
        <cuboid min="-24,21,-34" max="-23,22,-33"/>
    </apply>
    <!--    2 inward D.M.Ps on upper cubes   -->
    <apply velocity="0.65,1.2,0.65" enter="defenders-only">
        <cuboid min="16,21,-26" max="17,22,-27"/>
    </apply>
    <apply velocity="-0.65,1.2,0.65" enter="defenders-only">
        <cuboid min="-16,21,-26" max="-15,22,-27"/>
    </apply>
    <!--    2 outward D.M.Ps on lower ring   -->
    <apply velocity="-1,1.2,-1" enter="defenders-only">
        <cuboid min="-10,15,-20" max="-9,16,-19"/>
    </apply>
    <apply velocity="1,1.2,-1" enter="defenders-only">
        <cuboid min="10,15,-20" max="11,16,-19"/>
    </apply>
</regions>
<destroyables>
    <destroyable name="holding" owner="Attackers" completion="0%" materials="iron door block" mode-changes="true" show="false">
        <region name="holding-areas"/>
    </destroyable>
    <destroyable name="Endstone Pillar" owner="Defenders" show-progress="true" materials="ender stone" sparks="true" mode-changes="false" completion="100%">
        <region name="pillar"/>
    </destroyable>
</destroyables>
<modes>
    <mode after="30s" material="air" name="ATTACKERS RELEASED!"/>
</modes>
<time result="defenders">1230s</time>
<disabledamage>
    <damage self="false" ally="true" enemy="false" other="false">block explosion</damage>
</disabledamage>
<portals>
    <!--   portals to the chutes   -->
    <!--   chute A   -->
    <portal x="25" y="15" z="133">
        <region name="portal-a"/>
    </portal>
    <!--  chute B   -->
    <portal x="-25" y="15" z="133">
        <region name="portal-b"/>
    </portal>
	<!--  chute C   -->
    <portal x="0" y="15" z="99">
        <region name="portal-c"/>
    </portal>
    <!--  chute D   -->
    <portal x="16" y="15" z="66">
        <region name="portal-d"/>
    </portal>
    <!--  chute E   -->
    <portal x="-16" y="15" z="66">
        <region name="portal-e"/>
    </portal>
    <!--   portals to the platforms   -->
    <!--   platform A   -->
    <portal x="34" y="-17" z="15">
        <region name="portal-f"/>
    </portal>
    <!--   platform B   -->
    <portal x="0" y="-36" z="6">
        <region name="portal-g"/>
    </portal>
    <!--   platform C   -->
    <portal x="-34" y="-17" z="15">
        <region name="portal-h"/>
    </portal>
    <!--   portals from the chutes   -->
    <!--   chute A   -->
    <portal x="-30" y="-15" z="-158">
        <region name="return-portal-a"/>
    </portal>
    <!--  chute B   -->
    <portal x="30" y="-15" z="-158">
        <region name="return-portal-b"/>
    </portal>
	<!--  chute C   -->
    <portal x="0" y="-15" z="-118">
        <region name="return-portal-c"/>
    </portal>
    <!--  chute D   -->
    <portal x="-20" y="-15" z="-79">
        <region name="return-portal-d"/>
    </portal>
    <!--  chute E   -->
    <portal x="20" y="-15" z="-79">
        <region name="return-portal-e"/>
    </portal>
</portals>
</map>
